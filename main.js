(()=>{"use strict";async function e(e){const t=`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=48594e0287f39a8f2307182407fc5b7e`,n=await fetch(t);return(await n).json()}function t(e){const t=document.getElementById("weather-field");for(;t.hasChildNodes();)t.removeChild(t.lastChild);const n=document.createElement("p");var a;n.innerText=`${e.name} ${a=Number(e.main.temp),(a-273.15).toFixed(1)}Â°C`,t.appendChild(n);const o=document.createElement("img");o.src=`http://openweathermap.org/img/wn/${e.weather[0].icon}@2x.png`,t.appendChild(o)}function n(e,t){const n=document.getElementById("map-field");for(;n.hasChildNodes();)n.removeChild(n.lastChild);const a=document.createElement("img");a.src=`https://maps.googleapis.com/maps/api/staticmap?center=${e},${t}&zoom=14&size=600x600&key=AIzaSyAoHdEh_Eb_8xXLNi9802SEyZJj6epr04w`,n.appendChild(a)}async function a(){const e=JSON.parse(localStorage.getItem("cities"));return null==e?[]:e}async function o(a){const o=document.getElementById("list-field");for(;o.hasChildNodes();)o.removeChild(o.lastChild);const i=document.createElement("lo");a.forEach((a=>{const o=document.createElement("li");o.innerHTML=`<a class="btn" href="">${a}</a>`,o.addEventListener("click",(function(o){o.preventDefault(),async function(a){const o=await e(a);t(o),n(o.coord.lat,o.coord.lon)}(a)})),i.appendChild(o)})),o.appendChild(i)}const i=document.getElementById("app");!async function(){await async function(i){const c=document.createElement("form");c.id="input-field";const d=document.createElement("input"),l=document.createElement("button");l.innerText="Get weather",c.appendChild(d),c.appendChild(l),i.appendChild(c);const s=document.createElement("div");s.id="weather-field",i.appendChild(s);const r=document.createElement("div");r.id="list-field",i.appendChild(r);const m=document.createElement("div");m.id="map-field",i.appendChild(m),c.addEventListener("submit",(async function(i){i.preventDefault();const c=d.value;d.value="";const l=await e(c);if("404"===l.cod)return;const s=await a();for(s.push(c);s.length>10;)s.shift();n(l.coord.lat,l.coord.lon),t(l),await o(s),await async function(e){localStorage.setItem("cities",JSON.stringify(e))}(s)}))}(i);const c=await a(),d=await async function(){return(await fetch("https://get.geojs.io/v1/ip/geo.json")).json()}(),l=await e(d.city);n(l.coord.lat,l.coord.lon),t(l),await o(c)}()})();