(()=>{"use strict";var e={};async function t(t){const n=`https://api.openweathermap.org/data/2.5/weather?q=${t}&appid=48594e0287f39a8f2307182407fc5b7e`,o=await e.g.fetch(n);return(await o).json()}function n(e,t){for(;e.hasChildNodes();)e.removeChild(e.lastChild);const n=document.createElement("p");var o;n.innerText=`${t.name} ${o=Number(t.main.temp),(o-273.15).toFixed(1)}Â°C`,e.appendChild(n);const i=document.createElement("img");i.src=`http://openweathermap.org/img/wn/${t.weather[0].icon}@2x.png`,e.appendChild(i)}function o(e,t,n){for(;e.hasChildNodes();)e.removeChild(e.lastChild);const o=document.createElement("img");o.src=`https://maps.googleapis.com/maps/api/staticmap?center=${t},${n}&zoom=14&size=600x600&key=AIzaSyAoHdEh_Eb_8xXLNi9802SEyZJj6epr04w`,e.appendChild(o)}function i(){const e=localStorage.getItem("cities");return null==e?[]:JSON.parse(e)}function a(e,i){for(;e.hasChildNodes();)e.removeChild(e.lastChild);const a=document.createElement("lo");i.forEach((e=>{const i=document.createElement("li"),c=document.createElement("a");c.innerText=e,c.className="btn",c.href="",c.addEventListener("click",(async function(i){i.preventDefault(),await async function(e){const i=await t(e);n(document.querySelector("#weather-field"),i),o(document.querySelector("#map-field"),i.coord.lat,i.coord.lon)}(e)})),i.appendChild(c),a.appendChild(i)})),e.appendChild(a)}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();const c=document.getElementById("app");!async function(){!function(e){const c=document.createElement("form");c.id="input-field";const d=document.createElement("input"),r=document.createElement("button");r.innerText="Get weather",c.appendChild(d),c.appendChild(r),e.appendChild(c);const l=document.createElement("div");l.id="weather-field",e.appendChild(l);const s=document.createElement("div");s.id="list-field",e.appendChild(s);const p=document.createElement("div");p.id="map-field",e.appendChild(p),c.addEventListener("submit",(async function(e){e.preventDefault();const c=d.value;d.value="";const r=await t(c);if("404"===r.cod)return;const u=i();for(u.push(c);u.length>10;)u.shift();o(p,r.coord.lat,r.coord.lon),n(l,r),a(s,u),function(e){localStorage.setItem("cities",JSON.stringify(e))}(u)}))}(c);const d=i(),r=await async function(){return(await e.g.fetch("https://get.geojs.io/v1/ip/geo.json")).json()}(),l=await t(r.city);o(c.querySelector("#map-field"),l.coord.lat,l.coord.lon),n(c.querySelector("#weather-field"),l),a(c.querySelector("#list-field"),d)}()})();